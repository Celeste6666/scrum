{"version":3,"file":"static/js/161.f0787229.chunk.js","mappings":"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","sources":["components/BacklogGame.js","components/general/GameBasis.js","components/general/Sidebar.js","utils/drag.js"],"sourcesContent":["import { useState } from 'react';\r\nimport { useSelector } from 'react-redux';\r\nimport GameBasis from '@/components/general/GameBasis';\r\nimport BtnChallengeAccept from '@/components/general/BtnChallengeAccept';\r\nimport {dragstart_handler, dragover_handler, drop_handler, dragend_handler} from \"@/utils/drag\";\r\n\r\nfunction BacklogGame() {\r\n    const burgerContents = useSelector((state) => state.burgerSlice);\r\n\r\n  const [dragSource, setDragSource] = useState(null);\r\n\r\n  const [dragTargetList, setDragTargetList] = useState([]);\r\n\r\n  return (\r\n    <GameBasis>\r\n      {/* title */}\r\n      <h4 className=\"card_body card_title py-2.5 mb-3\">\r\n        產品代辦清單 (Product Backlog)\r\n      </h4>\r\n      {/* game components */}\r\n      <div className=\"w-full grid grid-cols-2 gap-36 border rounded-xl py-2 px-14\">\r\n        {/* game component left */}\r\n        <div className=\"flex flex-col justify-between items-center\">\r\n          <h6 className=\"text-h6 text-primary-active mb-5\">「人才招募系統」內容物</h6>\r\n          {burgerContents.map(({parentClass, id, style, content}) => (\r\n            <div\r\n              className={\r\n                'drag-border w-full ' +\r\n                parentClass\r\n              }\r\n              key={id}\r\n            >\r\n              <button\r\n                draggable=\"true\"\r\n                data-order={id}\r\n                className={style}\r\n                onDragStart={(e) => dragstart_handler(e, setDragSource)}\r\n                onDragEnd={e=>dragend_handler(e, dragTargetList, setDragTargetList)}\r\n              >\r\n                {content}\r\n              </button>\r\n            </div>\r\n          ))}\r\n        </div>\r\n        {/* game component right */}\r\n        <div className=\"flex flex-col justify-between items-center\">\r\n          <h6 className=\"text-h6 text-primary-active mb-5\">產品待辦清單（Product Backlog）</h6>\r\n          <div className=\"bg-burger-top bg-cover py-3.5 priority order-0\">優先度高</div>\r\n          {burgerContents.map(({id, order}) => (\r\n            <div\r\n              className={\r\n                'w-full h-12 border border-dashed border-primary-disabled my-0.5 rounded-lg blank ' +\r\n                order\r\n              }\r\n              key={id}\r\n              data-order={id}\r\n              onDrop={(e) => drop_handler(e, dragSource, dragTargetList, setDragTargetList)}\r\n              onDragOver={(e) => dragover_handler(e)}\r\n            ></div>\r\n          ))}\r\n          <div className=\"bg-burger-bottom bg-contain py-2 priority order-5\">優先度低</div>\r\n        </div>\r\n      </div>\r\n      {/* note */}\r\n      <p className=\"w-7/12 align-middle bg-white p-2 rounded-xl text-caption leading-5 ml-2.5\">\r\n        我們收到客戶的需求提示，想要一個大漢堡，一定要有\r\n        <span className=\"text-primary-hover\">肉、起司、生菜和番茄</span>。\r\n        請依照產品需求，排放到產品待辦清單並調整\r\n        <span className=\"text-primary-hover\">優先順序</span>。\r\n      </p>\r\n      {/* complete */}\r\n      <BtnChallengeAccept text=\"完成\" next=\"/planning\" addClass={dragTargetList.length !== 4 ? \"disabled ml-auto\" : \"ml-auto\"} />\r\n    </GameBasis>\r\n  );\r\n}\r\n\r\nexport default BacklogGame;\r\n","import PO from '@/assets/intro/PO.png';\r\nimport Sidebar from '@/components/general/Sidebar';\r\nfunction GameBasis(props) {\r\n  const { children, addClass } = props;\r\n  return (\r\n    <section className={\"card flex-col relative\" + (addClass? addClass : \"\")}>\r\n      {/* title */}\r\n      {children[0]}\r\n      <div className=\"card_body flex flex-col justify-between items-center px-5 pt-5 pb-2\">\r\n        <>\r\n          {/* components */}\r\n          {children[1]}\r\n        </>\r\n        <div className=\"flex flex-reverse justify-between items-center w-full mt-2\">\r\n          {/* photo */}\r\n          {children[2].type !== \"img\" ? (          <img src={PO} alt=\"PO\" width=\"55\" height=\"70\" className=\"inline-block\" />): \"\"}\r\n          {children[2]}\r\n          {/* note */}\r\n          {children.length >= 3 ? children[3] : ''}\r\n        </div>\r\n      </div>\r\n      <Sidebar />\r\n    </section>\r\n  );\r\n}\r\n\r\nexport default GameBasis;\r\n","import { useEffect } from 'react';\nimport { useLoaderData } from 'react-router';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { v4 as uuid } from 'uuid';\nimport { changePage } from '@/redux/sidebarSlice';\nfunction Sidebar() {\n  const TOTAL_PAGES = useSelector((state) => state.sidebarSlice.total_pages);\n  const dots = Array(TOTAL_PAGES).fill(0, 0, TOTAL_PAGES);\n\n  const dispatch = useDispatch();\n  const routerLoader = useLoaderData();\n  const CUR_PAGE = useSelector((state) => state.sidebarSlice.current_page);\n  useEffect(() => {\n    dispatch(changePage(routerLoader));\n  }, []);\n  return (\n    <div className=\"absolute top-1/2 right-5 z-10 -translate-y-1/2 flex flex-col\">\n      {dots.map((i, index) => (\n        <span\n          key={uuid()}\n          className={\n            'inline-block w-3 h-3 my-1 rounded-full ' +\n            (index + 1 === CUR_PAGE ? 'bg-primary' : 'bg-[#D9D9D9]')\n          }\n        ></span>\n      ))}\n    </div>\n  );\n}\n\nexport default Sidebar;\n","// target 為 button\r\nconst recoverParent = (target) => {\r\n  // dragStart 後 所有樣式恢復原狀\r\n  // 外框\r\n  target.parentElement.classList.remove('border-0', 'border-select-error');\r\n  target.parentElement.classList.add('border', 'border-dashed');\r\n  // button\r\n  target.classList.remove('bg-white', 'active', 'bg-primary');\r\n  if (target.classList.contains('scrum-drag')) {\r\n    target.classList.add('border', 'border-primary');\r\n  }\r\n};\r\n\r\n// target => div dragSource=>button\r\nconst changePosition = (target, dragSource, dragTargetList, setDragTargetList) => {\r\n  // 移到正確位置\r\n  if (dragSource.dataset.order === target.dataset.order) {\r\n    if (dragSource.classList.contains('scrum-drag')) {\r\n      dragSource.classList.add('bg-primary');\r\n    }\r\n    dragSource.classList.add('active');\r\n    target.classList.remove('border', 'border-dashed');\r\n    target.classList.add('border-0');\r\n\r\n    // 將正確的button添加到 dragTarget ==> 用來判斷是否完成\r\n    if (dragTargetList.findIndex((id) => id === dragSource.dataset.order) === -1) {\r\n      setDragTargetList([...dragTargetList, dragSource.dataset.order]);\r\n    }\r\n  }\r\n  // 移到錯誤位置\r\n  else {\r\n    target.classList.remove('border-dashed');\r\n    target.classList.add('border-select-error');\r\n    if (dragSource.classList.contains('scrum-drag')) {\r\n      dragSource.classList.add('bg-white');\r\n      dragSource.classList.remove('border', 'border-primary');\r\n    }\r\n    if (dragTargetList.findIndex((id) => id === dragSource.dataset.order) !== -1) {\r\n      setDragTargetList(dragTargetList.filter((id) => id !== dragSource.dataset.order));\r\n    }\r\n  }\r\n};\r\nexport const dragstart_handler = (e, setDragSource) => {\r\n  // DataTransfer.effectAllowed 属性指定为拖动源设置所需的拖动效果，应该在dragstart事件中设置此属性\r\n  e.dataTransfer.effectAllowed = 'move';\r\n  // 將目前移動的 button 存在 dragSource\r\n  setDragSource(e.target);\r\n  recoverParent(e.target);\r\n};\r\n\r\nexport const dragend_handler = (e, dragTargetList, setDragTargetList) => {\r\n  // 如果目前已經在正確位置時，button(e.target)、div 的狀態\r\n  if (e.target.parentElement.classList.contains('blank')) {\r\n    changePosition(e.target.parentElement, e.target, dragTargetList, setDragTargetList);\r\n  }\r\n};\r\n\r\nexport const dragover_handler = (e) => {\r\n  // 瀏覽器預設是不能在拖曳後進行放置，所以必須取消預設行為\r\n  e.preventDefault();\r\n  // DataTransfer.dropEffect 属性控制在拖放操作中给用户的反馈\r\n  // 最后一次 dragenter 或 dragover 事件后 dropEffect 的值即為 drop 和 dragend 事件，dropEffect 会被设置为想要得到的值\r\n  // dropEffect 是“move”，那么被拖拽的数据会从源中移除。\r\n  e.dataTransfer.dropEffect = 'move';\r\n};\r\n\r\n// dragSource 為被移動的 button\r\nexport const drop_handler = (e, dragSource, dragTargetList, setDragTargetList) => {\r\n  // 瀏覽器預設是不能在拖曳後進行放置，所以必須取消預設行為\r\n  e.preventDefault();\r\n  // target 為外框\r\n  const target = e.target;\r\n  if(target.tagName === \"DIV\" && target.children.length === 0) {\r\n  target.appendChild(dragSource);\r\n    if (dragSource.dataset.order) {\r\n    changePosition(target, dragSource, dragTargetList, setDragTargetList);\r\n  } else {\r\n    if (target.classList.contains('blank')) {\r\n      setDragTargetList([...dragTargetList, dragSource.dataset.point]);\r\n    } else {\r\n      const index = dragTargetList.findIndex((d) => d === dragSource.dataset.point);\r\n      setDragTargetList(dragTargetList.filter((id, i) => i !== index));\r\n    }\r\n  }\r\n}\r\n};\r\n\r\n/*\r\nbutton\r\n原樣式移除 .bg-white .active .bg-primary (scrum-drag)有 border border-primary\r\n1. 移動到對的位置者 .active\r\n  1.1 有 .scrum-drag 須加上 .bg-primary\r\n2. 移到錯誤位址者\r\n  2.1 有 .scrum-drag 須加上 'bg-white'\r\n  2.2 移除 border border-primary\r\n3. 從正確位置移到錯誤位置的 button 須恢復原狀\r\n  3.1 原在正確位置的會有 .active\r\n  3.2 移除 .active\r\n\r\n放置處 div\r\n原樣式有 .border-dashed .border 無.border-select-error border-0\r\n1. 當 button 放在正確位置(drop)時\r\n  1.1 div 需移除 .border-dashed .border\r\n  1.2 加上 .border-0\r\n2. 當 button 放在錯誤位置(drop)時\r\n  2.1 div 需移除 .border-dashed\r\n  2.2  div 需加上 .border-select-error\r\n3. 從正確位置移走到錯誤位置時 須恢復原狀\r\n  3.1 div 加回 .border-dashed .border\r\n\r\n*/\r\n"],"names":["burgerContents","useSelector","state","burgerSlice","useState","dragSource","setDragSource","dragTargetList","setDragTargetList","className","map","parentClass","id","style","content","draggable","onDragStart","e","dragstart_handler","onDragEnd","dragend_handler","order","onDrop","drop_handler","onDragOver","dragover_handler","text","next","addClass","length","props","children","type","src","PO","alt","width","height","TOTAL_PAGES","sidebarSlice","total_pages","dots","Array","fill","dispatch","useDispatch","routerLoader","useLoaderData","CUR_PAGE","current_page","useEffect","changePage","i","index","uuid","changePosition","target","dataset","classList","contains","add","remove","findIndex","filter","dataTransfer","effectAllowed","parentElement","preventDefault","dropEffect","tagName","appendChild","point","d"],"sourceRoot":""}