{"version":3,"file":"static/js/253.d167d7ab.chunk.js","mappings":"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","sources":["components/PlanningPoint.js","components/general/GameBasis.js","components/general/Sidebar.js","utils/drag.js"],"sourcesContent":["import { useState, useMemo } from 'react';\r\nimport { useSelector } from 'react-redux';\r\n\r\nimport GameBasis from '@/components/general/GameBasis';\r\nimport BtnChallengeAccept from '@/components/general/BtnChallengeAccept';\r\nimport PAN from '@/assets/food/pan.png';\r\nimport { dragstart_handler, dragover_handler, drop_handler } from '@/utils/drag';\r\n\r\nfunction PlanningPoint() {\r\n  const burgerContents = useSelector((state) => state.burgerSlice);\r\n  const [dragSource, setDragSource] = useState(null);\r\n  const [dragTargetList, setDragTargetList] = useState([]);\r\n  const btnDisabled = useMemo(() => {\r\n    let total = 0;\r\n    dragTargetList.forEach((point) => {\r\n      total += parseInt(point);\r\n    });\r\n    if (total > 20 || total <= 0) {\r\n        return true;\r\n      } else {\r\n        return false;\r\n      }\r\n  }, [dragTargetList]);\r\n  return (\r\n    <GameBasis>\r\n      {/* title */}\r\n      <h4 className=\"card_body card_title py-2.5 mb-3\">短衝點數 (Sprint Point)</h4>\r\n      {/* game components */}\r\n      <div className=\"grid grid-cols-2 gap-32 border rounded-xl py-3.5 pl-20 pr-12\">\r\n        {/* game component left */}\r\n        <div className=\"flex flex-col justify-between items-center\">\r\n          <h6 className=\"text-h6 text-primary-active mb-4\">產品待辦清單（Product Backlog）</h6>\r\n          <div className=\"bg-burger-top bg-cover py-3.5 priority order-0\">優先度高</div>\r\n          {burgerContents.map(({ order, id, style, content, point }) => (\r\n            <div\r\n              className={\r\n                'w-full h-12 border border-dashed border-primary-disabled my-0.5 rounded-lg ' +\r\n                order\r\n              }\r\n              key={order}\r\n              onDragOver={(e) => dragover_handler(e)}\r\n              onDrop={(e) => drop_handler(e, dragSource, dragTargetList, setDragTargetList)}\r\n            >\r\n              <button\r\n                draggable=\"true\"\r\n                data-point={point}\r\n                className={style + ' foodAfterEmpty relative'}\r\n                onDragStart={(e) => dragstart_handler(e, setDragSource)}\r\n              >\r\n                <span\r\n                  className={\r\n                    style + ' foodAfterEmpty foodBeforeEmpty w-1/6 h-full absolute -left-16'\r\n                  }\r\n                >\r\n                  {point}\r\n                </span>\r\n                <span>{content}</span>\r\n              </button>\r\n            </div>\r\n          ))}\r\n          <div className=\"bg-burger-bottom bg-contain py-2 priority order-5\">優先度低</div>\r\n        </div>\r\n\r\n        {/* game component right */}\r\n        <div className=\"flex flex-col justify-between items-center\">\r\n          <h6 className=\"text-h6 text-primary-active mb-4\">短衝代辦清單</h6>\r\n          <span className=\"text-primary\">限制 20點 / 5人</span>\r\n          {burgerContents.map(({ id, order }) => (\r\n            <div\r\n              className={\r\n                'w-full h-12 border border-dashed border-primary-disabled my-0.5 rounded-lg blank ' +\r\n                order\r\n              }\r\n              key={id}\r\n              onDrop={(e) => drop_handler(e, dragSource, dragTargetList, setDragTargetList)}\r\n              onDragOver={(e) => dragover_handler(e)}\r\n            ></div>\r\n          ))}\r\n          <img src={PAN} alt=\"pan\" className=\"order-last w-[365px] self-start\" />\r\n        </div>\r\n      </div>\r\n      {/* note */}\r\n      <p className=\"w-7/12 align-middle bg-white p-3 rounded-xl text-caption leading-5 ml-2.5\">\r\n        在限制的<span className=\"text-primary-hover\">點數</span>之內，將\r\n        <span className=\"text-primary-hover\">產品清單內的任務移至短衝待辦清單</span>。\r\n        就像是，我們為每個食材訂出烹飪時間，在有限的時間內選擇要烹飪食材。\r\n      </p>\r\n      {/* complete */}\r\n      <BtnChallengeAccept text=\"完成\" next=\"/sprint\" addClass={btnDisabled ? 'disabled' : ''} />\r\n    </GameBasis>\r\n  );\r\n}\r\n\r\nexport default PlanningPoint;\r\n","import PO from '@/assets/intro/PO.png';\r\nimport Sidebar from '@/components/general/Sidebar';\r\nfunction GameBasis(props) {\r\n  const { children, addClass } = props;\r\n  return (\r\n    <section className={\"card flex-col relative\" + (addClass? addClass : \"\")}>\r\n      {/* title */}\r\n      {children[0]}\r\n      <div className=\"card_body flex flex-col justify-between items-center px-5 pt-5 pb-2\">\r\n        <>\r\n          {/* components */}\r\n          {children[1]}\r\n        </>\r\n        <div className=\"flex flex-reverse justify-between items-center w-full mt-2\">\r\n          {/* photo */}\r\n          {children[2].type !== \"img\" ? (          <img src={PO} alt=\"PO\" width=\"55\" height=\"70\" className=\"inline-block\" />): \"\"}\r\n          {children[2]}\r\n          {/* note */}\r\n          {children.length >= 3 ? children[3] : ''}\r\n        </div>\r\n      </div>\r\n      <Sidebar />\r\n    </section>\r\n  );\r\n}\r\n\r\nexport default GameBasis;\r\n","import { useEffect } from 'react';\nimport { useLoaderData } from 'react-router';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { v4 as uuid } from 'uuid';\nimport { changePage } from '@/redux/sidebarSlice';\nfunction Sidebar() {\n  const TOTAL_PAGES = useSelector((state) => state.sidebarSlice.total_pages);\n  const dots = Array(TOTAL_PAGES).fill(0, 0, TOTAL_PAGES);\n\n  const dispatch = useDispatch();\n  const routerLoader = useLoaderData();\n  const CUR_PAGE = useSelector((state) => state.sidebarSlice.current_page);\n  useEffect(() => {\n    dispatch(changePage(routerLoader));\n  }, []);\n  return (\n    <div className=\"absolute top-1/2 right-5 z-10 -translate-y-1/2 flex flex-col\">\n      {dots.map((i, index) => (\n        <span\n          key={uuid()}\n          className={\n            'inline-block w-3 h-3 my-1 rounded-full ' +\n            (index + 1 === CUR_PAGE ? 'bg-primary' : 'bg-[#D9D9D9]')\n          }\n        ></span>\n      ))}\n    </div>\n  );\n}\n\nexport default Sidebar;\n","// target 為 button\r\nconst recoverParent = (target) => {\r\n  // dragStart 後 所有樣式恢復原狀\r\n  // 外框\r\n  target.parentElement.classList.remove('border-0', 'border-select-error');\r\n  target.parentElement.classList.add('border', 'border-dashed');\r\n  // button\r\n  target.classList.remove('bg-white', 'active', 'bg-primary');\r\n  if (target.classList.contains('scrum-drag')) {\r\n    target.classList.add('border', 'border-primary');\r\n  }\r\n};\r\n\r\n// target => div dragSource=>button\r\nconst changePosition = (target, dragSource, dragTargetList, setDragTargetList) => {\r\n  // 移到正確位置\r\n  if (dragSource.dataset.order === target.dataset.order) {\r\n    if (dragSource.classList.contains('scrum-drag')) {\r\n      dragSource.classList.add('bg-primary');\r\n    }\r\n    dragSource.classList.add('active');\r\n    target.classList.remove('border', 'border-dashed');\r\n    target.classList.add('border-0');\r\n\r\n    // 將正確的button添加到 dragTarget ==> 用來判斷是否完成\r\n    if (dragTargetList.findIndex((id) => id === dragSource.dataset.order) === -1) {\r\n      setDragTargetList([...dragTargetList, dragSource.dataset.order]);\r\n    }\r\n  }\r\n  // 移到錯誤位置\r\n  else {\r\n    target.classList.remove('border-dashed');\r\n    target.classList.add('border-select-error');\r\n    if (dragSource.classList.contains('scrum-drag')) {\r\n      dragSource.classList.add('bg-white');\r\n      dragSource.classList.remove('border', 'border-primary');\r\n    }\r\n    if (dragTargetList.findIndex((id) => id === dragSource.dataset.order) !== -1) {\r\n      setDragTargetList(dragTargetList.filter((id) => id !== dragSource.dataset.order));\r\n    }\r\n  }\r\n};\r\nexport const dragstart_handler = (e, setDragSource) => {\r\n  // DataTransfer.effectAllowed 属性指定为拖动源设置所需的拖动效果，应该在dragstart事件中设置此属性\r\n  e.dataTransfer.effectAllowed = 'move';\r\n  // 將目前移動的 button 存在 dragSource\r\n  setDragSource(e.target);\r\n  recoverParent(e.target);\r\n};\r\n\r\nexport const dragend_handler = (e, dragTargetList, setDragTargetList) => {\r\n  // 如果目前已經在正確位置時，button(e.target)、div 的狀態\r\n  if (e.target.parentElement.classList.contains('blank')) {\r\n    changePosition(e.target.parentElement, e.target, dragTargetList, setDragTargetList);\r\n  }\r\n};\r\n\r\nexport const dragover_handler = (e) => {\r\n  // 瀏覽器預設是不能在拖曳後進行放置，所以必須取消預設行為\r\n  e.preventDefault();\r\n  // DataTransfer.dropEffect 属性控制在拖放操作中给用户的反馈\r\n  // 最后一次 dragenter 或 dragover 事件后 dropEffect 的值即為 drop 和 dragend 事件，dropEffect 会被设置为想要得到的值\r\n  // dropEffect 是“move”，那么被拖拽的数据会从源中移除。\r\n  e.dataTransfer.dropEffect = 'move';\r\n};\r\n\r\n// dragSource 為被移動的 button\r\nexport const drop_handler = (e, dragSource, dragTargetList, setDragTargetList) => {\r\n  // 瀏覽器預設是不能在拖曳後進行放置，所以必須取消預設行為\r\n  e.preventDefault();\r\n  // target 為外框\r\n  const target = e.target;\r\n  if(target.tagName === \"DIV\" && target.children.length === 0) {\r\n  target.appendChild(dragSource);\r\n    if (dragSource.dataset.order) {\r\n    changePosition(target, dragSource, dragTargetList, setDragTargetList);\r\n  } else {\r\n    if (target.classList.contains('blank')) {\r\n      setDragTargetList([...dragTargetList, dragSource.dataset.point]);\r\n    } else {\r\n      const index = dragTargetList.findIndex((d) => d === dragSource.dataset.point);\r\n      setDragTargetList(dragTargetList.filter((id, i) => i !== index));\r\n    }\r\n  }\r\n}\r\n};\r\n\r\n/*\r\nbutton\r\n原樣式移除 .bg-white .active .bg-primary (scrum-drag)有 border border-primary\r\n1. 移動到對的位置者 .active\r\n  1.1 有 .scrum-drag 須加上 .bg-primary\r\n2. 移到錯誤位址者\r\n  2.1 有 .scrum-drag 須加上 'bg-white'\r\n  2.2 移除 border border-primary\r\n3. 從正確位置移到錯誤位置的 button 須恢復原狀\r\n  3.1 原在正確位置的會有 .active\r\n  3.2 移除 .active\r\n\r\n放置處 div\r\n原樣式有 .border-dashed .border 無.border-select-error border-0\r\n1. 當 button 放在正確位置(drop)時\r\n  1.1 div 需移除 .border-dashed .border\r\n  1.2 加上 .border-0\r\n2. 當 button 放在錯誤位置(drop)時\r\n  2.1 div 需移除 .border-dashed\r\n  2.2  div 需加上 .border-select-error\r\n3. 從正確位置移走到錯誤位置時 須恢復原狀\r\n  3.1 div 加回 .border-dashed .border\r\n\r\n*/\r\n"],"names":["burgerContents","useSelector","state","burgerSlice","useState","dragSource","setDragSource","dragTargetList","setDragTargetList","btnDisabled","useMemo","total","forEach","point","parseInt","GameBasis","className","map","order","style","id","content","onDragOver","e","dragover_handler","onDrop","drop_handler","draggable","onDragStart","dragstart_handler","src","alt","BtnChallengeAccept","text","next","addClass","props","children","type","PO","width","height","length","TOTAL_PAGES","sidebarSlice","total_pages","dots","Array","fill","dispatch","useDispatch","routerLoader","useLoaderData","CUR_PAGE","current_page","useEffect","changePage","i","index","uuid","changePosition","target","dataset","classList","contains","add","remove","findIndex","filter","dataTransfer","effectAllowed","parentElement","dragend_handler","preventDefault","dropEffect","tagName","appendChild","d"],"sourceRoot":""}