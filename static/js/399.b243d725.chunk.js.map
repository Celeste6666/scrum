{"version":3,"file":"static/js/399.b243d725.chunk.js","mappings":"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","sources":["components/SprintGame.js","components/general/GameBasis.js","components/general/Sidebar.js","utils/drag.js"],"sourcesContent":["import { useId, useState } from 'react';\r\nimport GameBasis from '@/components/general/GameBasis';\r\nimport BtnChallengeAccept from '@/components/general/BtnChallengeAccept';\r\nimport Scrum from '@/assets/Scrum.png';\r\nimport { dragstart_handler, dragover_handler, drop_handler, dragend_handler } from '@/utils/drag';\r\n\r\nfunction SprintGame() {\r\n  const [scrumStep] = useState([\r\n    {\r\n      id: useId(),\r\n      content: '短衝檢視會議 (Sprint Review)',\r\n      style: 'relative left-[347px] top-32',\r\n    },\r\n    {\r\n      id: useId(),\r\n      content: '每日站立會議 (Daily Scrum)',\r\n      style: 'relative left-16 top-6',\r\n    },\r\n    {\r\n      id: useId(),\r\n      content: '短衝自省會議 (Sprint Retrospective)',\r\n      style: 'relative left-5 top-48',\r\n    },\r\n  ]);\r\n  const [dragSource, setDragSource] = useState(null);\r\n\r\n  const [dragTargetList, setDragTargetList] = useState([]);\r\n\r\n  return (\r\n    <GameBasis>\r\n      {/* title */}\r\n      <h4 className=\"card_body card_title py-2.5 mb-3\">短衝 (Sprint)</h4>\r\n      {/* scrum 流程圖 */}\r\n      <div className=\"w-full border rounded-xl pt-10 pb-5 px-10 relative\">\r\n        <img src={Scrum} alt=\"Scrum\" className=\"w-full\" />\r\n        {/* blank */}\r\n        <div className=\"w-full h-full grid grid-cols-3 gap-2 py-3.5 px-10 absolute top-0 left-0\">\r\n          {scrumStep.map(({ id, style }) => (\r\n            <div\r\n              className={'drag-border w-full blank ' + style}\r\n              key={id}\r\n              data-order={id}\r\n              onDragOver={(e) => dragover_handler(e)}\r\n              onDrop={(e) => drop_handler(e, dragSource, dragTargetList, setDragTargetList)}\r\n            ></div>\r\n          ))}\r\n        </div>\r\n        {/* options */}\r\n        <div className=\"grid grid-cols-3 gap-3 mt-10\">\r\n          {scrumStep.map(({ id, content }) => (\r\n            <div className=\"drag-border\" key={id}>\r\n              <button\r\n                draggable=\"true\"\r\n                className=\"btn text-primary-active border border-primary text-caption py-3.5 scrum-drag\"\r\n                data-order={id}\r\n                onDragStart={(e) => dragstart_handler(e, setDragSource)}\r\n                onDragEnd={(e) => dragend_handler(e, dragTargetList, setDragTargetList)}\r\n              >\r\n                {content}\r\n              </button>\r\n            </div>\r\n          ))}\r\n        </div>\r\n      </div>\r\n      {/* note */}\r\n      <p className=\"w-7/12 align-middle bg-white p-2 rounded-xl text-caption leading-5 ml-2.5\">\r\n        換你試試看! 在這經典的 <span className=\"text-primary-hover\">Scrum流程圖</span>{' '}\r\n        中，有三個重要的會議會執行。 嘗試安排他們的名字到正確的位置去吧!\r\n      </p>\r\n      {/* complete */}\r\n      <BtnChallengeAccept text=\"完成\" next=\"/retrospective\" addClass={\"ml-auto \" + (dragTargetList.length !== 3 ? \"disabled\": \"\" )} />\r\n    </GameBasis>\r\n  );\r\n}\r\n\r\nexport default SprintGame;\r\n","import PO from '@/assets/intro/PO.png';\r\nimport Sidebar from '@/components/general/Sidebar';\r\nfunction GameBasis(props) {\r\n  const { children, addClass } = props;\r\n  return (\r\n    <section className={\"card flex-col relative\" + (addClass? addClass : \"\")}>\r\n      {/* title */}\r\n      {children[0]}\r\n      <div className=\"card_body flex flex-col justify-between items-center px-5 pt-5 pb-2\">\r\n        <>\r\n          {/* components */}\r\n          {children[1]}\r\n        </>\r\n        <div className=\"flex flex-reverse justify-between items-center w-full mt-2\">\r\n          {/* photo */}\r\n          {children[2].type !== \"img\" ? (          <img src={PO} alt=\"PO\" width=\"55\" height=\"70\" className=\"inline-block\" />): \"\"}\r\n          {children[2]}\r\n          {/* note */}\r\n          {children.length >= 3 ? children[3] : ''}\r\n        </div>\r\n      </div>\r\n      <Sidebar />\r\n    </section>\r\n  );\r\n}\r\n\r\nexport default GameBasis;\r\n","import { useEffect } from 'react';\nimport { useLoaderData } from 'react-router';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { v4 as uuid } from 'uuid';\nimport { changePage } from '@/redux/sidebarSlice';\nfunction Sidebar() {\n  const TOTAL_PAGES = useSelector((state) => state.sidebarSlice.total_pages);\n  const dots = Array(TOTAL_PAGES).fill(0, 0, TOTAL_PAGES);\n\n  const dispatch = useDispatch();\n  const routerLoader = useLoaderData();\n  const CUR_PAGE = useSelector((state) => state.sidebarSlice.current_page);\n  useEffect(() => {\n    dispatch(changePage(routerLoader));\n  }, []);\n  return (\n    <div className=\"absolute top-1/2 right-5 z-10 -translate-y-1/2 flex flex-col\">\n      {dots.map((i, index) => (\n        <span\n          key={uuid()}\n          className={\n            'inline-block w-3 h-3 my-1 rounded-full ' +\n            (index + 1 === CUR_PAGE ? 'bg-primary' : 'bg-[#D9D9D9]')\n          }\n        ></span>\n      ))}\n    </div>\n  );\n}\n\nexport default Sidebar;\n","// target 為 button\r\nconst recoverParent = (target) => {\r\n  // dragStart 後 所有樣式恢復原狀\r\n  // 外框\r\n  target.parentElement.classList.remove('border-0', 'border-select-error');\r\n  target.parentElement.classList.add('border', 'border-dashed');\r\n  // button\r\n  target.classList.remove('bg-white', 'active', 'bg-primary');\r\n  if (target.classList.contains('scrum-drag')) {\r\n    target.classList.add('border', 'border-primary');\r\n  }\r\n};\r\n\r\n// target => div dragSource=>button\r\nconst changePosition = (target, dragSource, dragTargetList, setDragTargetList) => {\r\n  // 移到正確位置\r\n  if (dragSource.dataset.order === target.dataset.order) {\r\n    if (dragSource.classList.contains('scrum-drag')) {\r\n      dragSource.classList.add('bg-primary');\r\n    }\r\n    dragSource.classList.add('active');\r\n    target.classList.remove('border', 'border-dashed');\r\n    target.classList.add('border-0');\r\n\r\n    // 將正確的button添加到 dragTarget ==> 用來判斷是否完成\r\n    if (dragTargetList.findIndex((id) => id === dragSource.dataset.order) === -1) {\r\n      setDragTargetList([...dragTargetList, dragSource.dataset.order]);\r\n    }\r\n  }\r\n  // 移到錯誤位置\r\n  else {\r\n    target.classList.remove('border-dashed');\r\n    target.classList.add('border-select-error');\r\n    if (dragSource.classList.contains('scrum-drag')) {\r\n      dragSource.classList.add('bg-white');\r\n      dragSource.classList.remove('border', 'border-primary');\r\n    }\r\n    if (dragTargetList.findIndex((id) => id === dragSource.dataset.order) !== -1) {\r\n      setDragTargetList(dragTargetList.filter((id) => id !== dragSource.dataset.order));\r\n    }\r\n  }\r\n};\r\nexport const dragstart_handler = (e, setDragSource) => {\r\n  // DataTransfer.effectAllowed 属性指定为拖动源设置所需的拖动效果，应该在dragstart事件中设置此属性\r\n  e.dataTransfer.effectAllowed = 'move';\r\n  // 將目前移動的 button 存在 dragSource\r\n  setDragSource(e.target);\r\n  recoverParent(e.target);\r\n};\r\n\r\nexport const dragend_handler = (e, dragTargetList, setDragTargetList) => {\r\n  // 如果目前已經在正確位置時，button(e.target)、div 的狀態\r\n  if (e.target.parentElement.classList.contains('blank')) {\r\n    changePosition(e.target.parentElement, e.target, dragTargetList, setDragTargetList);\r\n  }\r\n};\r\n\r\nexport const dragover_handler = (e) => {\r\n  // 瀏覽器預設是不能在拖曳後進行放置，所以必須取消預設行為\r\n  e.preventDefault();\r\n  // DataTransfer.dropEffect 属性控制在拖放操作中给用户的反馈\r\n  // 最后一次 dragenter 或 dragover 事件后 dropEffect 的值即為 drop 和 dragend 事件，dropEffect 会被设置为想要得到的值\r\n  // dropEffect 是“move”，那么被拖拽的数据会从源中移除。\r\n  e.dataTransfer.dropEffect = 'move';\r\n};\r\n\r\n// dragSource 為被移動的 button\r\nexport const drop_handler = (e, dragSource, dragTargetList, setDragTargetList) => {\r\n  // 瀏覽器預設是不能在拖曳後進行放置，所以必須取消預設行為\r\n  e.preventDefault();\r\n  // target 為外框\r\n  const target = e.target;\r\n  if(target.tagName === \"DIV\" && target.children.length === 0) {\r\n  target.appendChild(dragSource);\r\n    if (dragSource.dataset.order) {\r\n    changePosition(target, dragSource, dragTargetList, setDragTargetList);\r\n  } else {\r\n    if (target.classList.contains('blank')) {\r\n      setDragTargetList([...dragTargetList, dragSource.dataset.point]);\r\n    } else {\r\n      const index = dragTargetList.findIndex((d) => d === dragSource.dataset.point);\r\n      setDragTargetList(dragTargetList.filter((id, i) => i !== index));\r\n    }\r\n  }\r\n}\r\n};\r\n\r\n/*\r\nbutton\r\n原樣式移除 .bg-white .active .bg-primary (scrum-drag)有 border border-primary\r\n1. 移動到對的位置者 .active\r\n  1.1 有 .scrum-drag 須加上 .bg-primary\r\n2. 移到錯誤位址者\r\n  2.1 有 .scrum-drag 須加上 'bg-white'\r\n  2.2 移除 border border-primary\r\n3. 從正確位置移到錯誤位置的 button 須恢復原狀\r\n  3.1 原在正確位置的會有 .active\r\n  3.2 移除 .active\r\n\r\n放置處 div\r\n原樣式有 .border-dashed .border 無.border-select-error border-0\r\n1. 當 button 放在正確位置(drop)時\r\n  1.1 div 需移除 .border-dashed .border\r\n  1.2 加上 .border-0\r\n2. 當 button 放在錯誤位置(drop)時\r\n  2.1 div 需移除 .border-dashed\r\n  2.2  div 需加上 .border-select-error\r\n3. 從正確位置移走到錯誤位置時 須恢復原狀\r\n  3.1 div 加回 .border-dashed .border\r\n\r\n*/\r\n"],"names":["useState","id","useId","content","style","scrumStep","dragSource","setDragSource","dragTargetList","setDragTargetList","GameBasis","className","src","Scrum","alt","map","onDragOver","e","dragover_handler","onDrop","drop_handler","draggable","onDragStart","dragstart_handler","onDragEnd","dragend_handler","BtnChallengeAccept","text","next","addClass","length","props","children","type","PO","width","height","TOTAL_PAGES","useSelector","state","sidebarSlice","total_pages","dots","Array","fill","dispatch","useDispatch","routerLoader","useLoaderData","CUR_PAGE","current_page","useEffect","changePage","i","index","uuid","changePosition","target","dataset","order","classList","contains","add","remove","findIndex","filter","dataTransfer","effectAllowed","parentElement","preventDefault","dropEffect","tagName","appendChild","point","d"],"sourceRoot":""}